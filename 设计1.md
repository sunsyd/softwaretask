![](C:\Users\ssy\Desktop\jisuanqi\图片1.png)

#### **前端界面：**

1.人机交互，供用户输入运算字符串。

2.进行简单运算字符串格式校验（如不以运算符号结尾，括号的对称校验），有误则提示修改

3.将运算字符串以js串格式传输给中间层。

#### **中间层：**

1.接收并解析js串，将运算字符串转换成函数调用格式（函数调用树）（函数来源于后端计算接口）

2.接收后端函数执行的结果返回值并将结果信息传给前端。

#### **后端计算：**

1.为中间层提供函数调用接口

2.执行调用请求并返回结果信息



**示例：**

"sin(π/4)×√(16)+log(100)−5!"

前端：

```json
{
  "timestamp": "2025-05-12T15:30:00.000Z",
  "expression": "sin(π/4)×√(16)+log(100)−5!",
  "inputDetails": {
    "cursorPosition": 20,
    "expressionBuffer": "sin(π/4)×√(16)+log(100)−5!"
  },
  "mode": {
    "isScientific": true,
    "angleUnit": "rad"  // 假设当前单位为弧度（π为弧度单位）
  }
}
```

中间：

```json
{
    "type": "operation",
    "operator": "subtract",  // 最外层是减法（A - B）
    "left": {
        "type": "operation",
        "operator": "add",   // 左子树是加法（C + D）
        "left": {
            "type": "operation",
            "operator": "multiply",  // 左子树是乘法（E * F）
            "left": {
                "type": "function",
                "func": "sin",       // sin函数调用
                "args": [{
                    "type": "operation",
                    "operator": "divide",  // 参数是除法（π / 4）
                    "left": { "type": "constant", "value": 3.141592653589793 },  // π
                    "right": { "type": "number", "value": 4 }
                }]
            },
            "right": {
                "type": "function",
                "func": "sqrt",      // sqrt函数调用
                "args": [{ "type": "number", "value": 16 }]  // 参数是16
            }
        },
        "right": {
            "type": "function",
            "func": "log10",        // log10函数调用
            "args": [{ "type": "number", "value": 100 }]  // 参数是100
        }
    },
    "right": {
        "type": "function",
        "func": "factorial",       // factorial函数调用（对应前端的fact()）
        "args": [{ "type": "number", "value": 5 }]  // 参数是5
    }
}
```

后端：

```json
{
    "Success": true,
    "Result": -115.17157287525381,
    "ErrorMessage": null
}
```